---
# generate list of pages in page nav
---
title,section,parent,url
{%- assign pagesnav = site.data.config_pagesnav -%}
{% capture sections %}{% for i in pagesnav %}{{ i[0] }}{% unless forloop.last %};{% endunless %}{% endfor %}{%- endcapture -%}
{%- assign sections = sections | split: ';' -%}
{%- for s in sections -%}{% assign pages = pagesnav[s] %}{% for p in pages %}
{{ p.parent | default: p.subsection | remove: ',' }},{{ s }},{% if p.subpages %}true{% endif %},{{ p.stub | default: p.link | absolute_url }}{% if p.subpages %}{% for sp in p.subpages %}
{{ sp.name }},{{ s }},{{ p.subsection | remove: ',' }},{{ sp.url | absolute_url }}{% endfor %}{% endif %}{% endfor %}{% endfor %}